<div class="row">
  <div class="three columns">
    <div class="side_bar_2">
      <%= render partial: 'trips_sidebar',
                 locals: { trips: @trips } %>

      <%= render partial: 'travelers_sidebar',
                 locals: { travelers: @travelers } %>

      <%= render partial: 'kreepings_sidebar',
                 locals: { kreepings: @kreepings } %>

      <% if current_user && !current_user.my_trips.include?(@trip) %>
        <%= button_to "Follow this Trip", {:controller => 'user_trips', :action => 'create_kreepr', :trip_id => @trip.id, :trip_role => "kreepr", :username => current_user.username}, :class => "radius button" %>
      <% elsif current_user && @trip.kreeprs.include?(current_user) %>
        <%= button_to "Unfollow this Trip", {:controller => 'user_trips', :action => 'destroy', :trip_id => @trip.id, :trip_role => "kreepr", :user_id => current_user.id}, method: :delete, :class => "radius button" %>
      <% end %>
    </div>
  </div>

  <div class="five columns" style="text-align: center; margin-top: 20px">
    <h1 id="page headline"><%= @trip.name %></h1>
    <h3 id="page headline"><%= @trip.pretty_date_range %></h3>
    <h3 id="page headline"><%= @trip.destination %></h3>
    <br>
      <% if current_user && current_user == @trip.owner %>
        <%= button_to "Edit Trip", edit_trip_path(@trip), method: :get, :class => "radius button small" %>
      <% end %>
  </div>
  <div class="four columns">
    <%= render partial: 'shared/map', locals: { :location => @trip.destination } %>
  </div>

  <br>

  <div class="nine columns">

    <%= render :partial => 'post_note',
               :locals => {:trip => @trip, :note => @note } %>

    <%= render :partial => 'feed_item',
               :locals => {:feed_items => @feed_items } %>
  </div>
</div>
